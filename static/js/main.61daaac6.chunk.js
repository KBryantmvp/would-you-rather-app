(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{180:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(25),s=n.n(o),i=(n(85),n(13)),c=n(14),u=n(16),l=n(15),m=n(17),d=n(134),p=n(38),h=n(133),b=n(135),v=n(11),O=n(142),f=n(18),E=n(10),j={sarahedo:{id:"sarahedo",name:"Sarah Edo",avatarURL:"https://api.adorable.io/avatars/120/i.png",answers:{"8xf0y6ziyjabvozdd253nd":"optionOne","6ni6ok3ym7mf1p33lnez":"optionTwo",am8ehyc8byjqgar0jgpub9:"optionTwo",loxhs1bqm25b708cmbf3g:"optionTwo"},questions:["8xf0y6ziyjabvozdd253nd","am8ehyc8byjqgar0jgpub9"]},tylermcginnis:{id:"tylermcginnis",name:"Tyler McGinnis",avatarURL:"https://api.adorable.io/avatars/120/test@adorable.png",answers:{vthrdm985a262al8qx3do:"optionOne",xj352vofupe1dqz9emx13r:"optionTwo"},questions:["loxhs1bqm25b708cmbf3g","vthrdm985a262al8qx3do"]},johndoe:{id:"johndoe",name:"John Doe",avatarURL:"https://api.adorable.io/avatars/120/avatar.png",answers:{xj352vofupe1dqz9emx13r:"optionOne",vthrdm985a262al8qx3do:"optionTwo","6ni6ok3ym7mf1p33lnez":"optionTwo"},questions:["6ni6ok3ym7mf1p33lnez","xj352vofupe1dqz9emx13r"]}},w={"8xf0y6ziyjabvozdd253nd":{id:"8xf0y6ziyjabvozdd253nd",author:"sarahedo",timestamp:1467166872634,optionOne:{votes:["sarahedo"],text:"have horrible short term memory"},optionTwo:{votes:[],text:"have horrible long term memory"}},"6ni6ok3ym7mf1p33lnez":{id:"6ni6ok3ym7mf1p33lnez",author:"johndoe",timestamp:1468479767190,optionOne:{votes:[],text:"become a superhero"},optionTwo:{votes:["johndoe","sarahedo"],text:"become a supervillain"}},am8ehyc8byjqgar0jgpub9:{id:"am8ehyc8byjqgar0jgpub9",author:"sarahedo",timestamp:1488579767190,optionOne:{votes:[],text:"be telekinetic"},optionTwo:{votes:["sarahedo"],text:"be telepathic"}},loxhs1bqm25b708cmbf3g:{id:"loxhs1bqm25b708cmbf3g",author:"tylermcginnis",timestamp:1482579767190,optionOne:{votes:[],text:"be a front-end developer"},optionTwo:{votes:["sarahedo"],text:"be a back-end developer"}},vthrdm985a262al8qx3do:{id:"vthrdm985a262al8qx3do",author:"tylermcginnis",timestamp:1489579767190,optionOne:{votes:["tylermcginnis"],text:"find $50 yourself"},optionTwo:{votes:["johndoe"],text:"have your best friend find $500"}},xj352vofupe1dqz9emx13r:{id:"xj352vofupe1dqz9emx13r",author:"johndoe",timestamp:1493579767190,optionOne:{votes:["johndoe"],text:"write JavaScript"},optionTwo:{votes:["tylermcginnis"],text:"write Swift"}}};function g(e){var t=e.optionOneText,n=e.optionTwoText,a=e.author;return{id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),timestamp:Date.now(),author:a,optionOne:{votes:[],text:t},optionTwo:{votes:[],text:n}}}function y(){return Promise.all([new Promise(function(e,t){setTimeout(function(){return e(Object(E.a)({},j))},1e3)}),new Promise(function(e,t){setTimeout(function(){return e(Object(E.a)({},w))},1e3)})]).then(function(e){var t=Object(O.a)(e,2);return{users:t[0],questions:t[1]}})}function q(e){return function(e){var t=e.authedUser,n=e.qid,a=e.answer;return new Promise(function(e,r){setTimeout(function(){j=Object(E.a)({},j,Object(f.a)({},t,Object(E.a)({},j[t],{answers:Object(E.a)({},j[t].answers,Object(f.a)({},n,a))}))),w=Object(E.a)({},w,Object(f.a)({},n,Object(E.a)({},w[n],Object(f.a)({},a,Object(E.a)({},w[n][a],{votes:w[n][a].votes.concat([t])}))))),e()},500)})}(e)}function x(e){return function(e){return new Promise(function(t,n){var a=e.author,r=g(e);setTimeout(function(){w=Object(E.a)({},w,Object(f.a)({},r.id,r)),j=Object(E.a)({},j,Object(f.a)({},a,Object(E.a)({},j[a],{questions:j[a].questions.concat([r.id])}))),t(r)},1e3)})}(e)}var T="RECEIVE_USERS";var U=n(27),S=n.n(U),k="RECEIVE_QUESTIONS",N="VOTE_QUESTION",C="NEW_QUESTION";function A(e){return function(t){return t(function(e){var t=e.authedUser,n=e.qid,a=e.answer;return{type:N,authedUser:t,qid:n,answer:a}}(e)),q(e).catch(function(e){console.warn("Error in handleVoteQuestion: ",e),alert("There was an error voting the question. Try again")}).then(function(e){return console.log("res",e)})}}function R(e){return function(t){return t(Object(U.showLoading)()),x(e).catch(function(e){console.warn("Error in handleNewQuestion: ",e),alert("There was an error submitting the question. Try again")}).then(function(e){return t(function(e){return{type:C,question:e}}(e))}).then(function(){return t(Object(U.hideLoading)())})}}function L(){return function(e){return e(Object(U.showLoading)()),y().then(function(t){var n=t.users,a=t.questions;e(function(e){return{type:T,users:e}}(n)),e(function(e){return{type:k,questions:e}}(a)),e(Object(U.hideLoading)())})}}var Q=n(54),I=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"avatar",alt:"avatar-image"},r.a.createElement("img",{src:this.props.avatarURL})),r.a.createElement("div",{className:"question-text"},r.a.createElement("strong",null,"Would you rather..."),r.a.createElement("div",{className:"options"},r.a.createElement("span",null,this.props.questionItem.optionOne.text),r.a.createElement("br",null),r.a.createElement("span",null,this.props.questionItem.optionTwo.text)),r.a.createElement(Q.a,{to:"/question/".concat(this.props.id)},"VIEW QUESTION")))}}]),t}(a.Component);var z=Object(v.connect)(function(e,t){var n=e.questions,a=e.users,r=t.id,o=n[r];return{id:r,questionItem:o,avatarURL:a[o.author].avatarURL}})(I),D=n(181),P=n(182),W=n(113),_=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={showAnsweredQs:!1},n.displayUnansQs=function(){n.setState({showAnsweredQs:!1})},n.displayAnsQs=function(){n.setState({showAnsweredQs:!0})},n.calculateUnanswered=function(e){return e.filter(function(e){return n.props.sortedAnswerIds.indexOf(e)<0})},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.showAnsweredQs;return r.a.createElement(D.a,{className:"center"},r.a.createElement("div",null,r.a.createElement("button",{type:"button",onClick:this.displayUnansQs},"Unanswered Questions"),r.a.createElement("button",{type:"button",onClick:this.displayAnsQs},"Answered Questions")),r.a.createElement(P.a,{className:"question-list"},!1===e?this.calculateUnanswered(this.props.questionIds).map(function(e){return r.a.createElement(W.a,{key:e,className:"question-item"},r.a.createElement(z,{id:e}))}):this.props.sortedAnswerIds.map(function(e){return r.a.createElement(W.a,{key:e,className:"question-item"},r.a.createElement(z,{id:e}))})))}}]),t}(a.Component);var H=Object(v.connect)(function(e){var t=e.authedUser,n=e.questions,a=e.users;return{authedUser:t,sortedAnswerIds:Object.keys(a[t].answers).sort(function(e,t){return n[t].timestamp-n[e].timestamp}),questionIds:Object.keys(n).sort(function(e,t){return n[t].timestamp-n[e].timestamp})}})(_),V=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={value:""},n.handleChange=function(e){n.setState({value:e.target.value})},n.handleSubmit=function(e){e.preventDefault();var t=n.props,a=t.authedUser,r=t.qid;(0,t.dispatch)(A({authedUser:a,qid:r,answer:n.state.value}))},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.avatarURL,n=e.question,a=e.hasAnswered,o=e.answerVoted;if(!n)return r.a.createElement(h.a,{to:"/404-page-not-found"});var s=n.optionOne.text,i=n.optionTwo.text,c=n.optionOne.votes.length,u=n.optionTwo.votes.length,l=c+u;return r.a.createElement(D.a,{className:"center"},r.a.createElement("h2",null,"WOULD YOU RATHER..."),r.a.createElement("div",{className:"question-item"},r.a.createElement("div",{className:"avatar"},r.a.createElement("img",{src:t,alt:"avatar-image"})),!1===a?r.a.createElement("div",{className:"options"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,r.a.createElement("input",{type:"radio",checked:"optionOne"===this.state.value,value:"optionOne",onChange:this.handleChange}),s),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",checked:"optionTwo"===this.state.value,value:"optionTwo",onChange:this.handleChange}),i),r.a.createElement("input",{type:"submit",value:"Submit"}))):r.a.createElement("div",{className:"results"},r.a.createElement("h3",null,"RESULTS:"),r.a.createElement("div",{className:"results-answer"},r.a.createElement("div",{className:"optionOne "+("optionOne"===o?"answer":"")},r.a.createElement("h4",null,s),r.a.createElement("span",null,c," out of ",l," votes (",(c/l*100).toFixed(1),"%)")),r.a.createElement("div",{className:"optionTwo "+("optionTwo"===o?"answer":"")},r.a.createElement("h4",null,i),r.a.createElement("span",null,u," out of ",l," votes (",(u/l*100).toFixed(1),"%)"))))))}}]),t}(a.Component);var F=Object(v.connect)(function(e,t){var n=e.authedUser,a=e.questions,r=e.users,o=t.match.params.id,s=a[o],i=s?r[s.author].avatarURL:null,c="";return s&&s.optionOne.votes.indexOf(n)>=0&&(c="optionOne"),s&&s.optionTwo.votes.indexOf(n)>=0&&(c="optionTwo"),{qid:o,authedUser:n,question:s,avatarURL:i,answerVoted:c,hasAnswered:!!r[n].answers[o]}})(V),B=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={optionOneText:"",optionTwoText:"",toHome:!1},n.handleChange=function(e){n.setState(Object(f.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault();var t=n.props,a=t.author,r=t.dispatch,o=n.state;r(R({optionOneText:o.optionOneText,optionTwoText:o.optionTwoText,author:a})),n.setState({optionOneText:"",optionTwoText:"",toHome:!0})},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.optionOneText,n=e.optionTwoText;return!0===e.toHome?r.a.createElement(h.a,{to:"/"}):r.a.createElement(D.a,{className:"center"},r.a.createElement("h2",null,"CREATE NEW QUESTION"),r.a.createElement("div",{className:"new-question"},r.a.createElement("h4",null,"Would you rather..."),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"optionOneText",placeholder:"Enter option one...",onChange:this.handleChange,value:this.state.optionOneText}),r.a.createElement("br",null),r.a.createElement("span",null,"Or...")," ",r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"optionTwoText",placeholder:"Enter option two...",onChange:this.handleChange,value:this.state.optionTwoText}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Submit",disabled:!(t&&n)}))))}}]),t}(a.Component);var J=Object(v.connect)(function(e){return{author:e.authedUser}})(B),M=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.scoreUser,t=e.answeredQuestions,n=e.questionsCreated,o=e.totalScore;return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"avatar"},r.a.createElement("img",{src:e.avatarURL,alt:"avatar-image"})),r.a.createElement("div",{className:"user-info"},r.a.createElement("h3",null,e.name),r.a.createElement("span",null,"Answered questions: ",t)," ",r.a.createElement("br",null),r.a.createElement("span",null,"Created questions: ",n)),r.a.createElement("div",{className:"score"},r.a.createElement("strong",null,"Score:")," ",r.a.createElement("br",null),r.a.createElement("span",null,o)))}}]),t}(a.Component),G=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.scoreUsers;return r.a.createElement(D.a,{className:"center"},r.a.createElement(P.a,{className:"leader-list",componentClass:"ul"},e.sort(function(e,t){return t.totalScore-e.totalScore}).map(function(e,t){return r.a.createElement(W.a,{key:t,className:"leader-item"},r.a.createElement(M,{scoreUser:e}))})))}}]),t}(a.Component);var Y=Object(v.connect)(function(e){var t=e.users;return{scoreUsers:Object.keys(t).reduce(function(e,n){return e.concat(t[n])},[]).map(function(e){return{id:e.id,name:e.name,avatarURL:e.avatarURL,answeredQuestions:Object.keys(e.answers).length,questionsCreated:e.questions.length,totalScore:Object.keys(e.answers).length+e.questions.length}})}})(G),$="SET_AUTHED_USER",K="UNSET_AUTHED_USER";function X(){return{type:$}}var Z=n(186),ee=n(183),te=n(184),ne=n(116),ae=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"signOut",value:function(e){(0,this.props.dispatch)(X)}},{key:"render",value:function(){var e=this.props.authedUser;return r.a.createElement(Z.a,null,r.a.createElement(ee.a,{bsStyle:"tabs"},r.a.createElement(ne.LinkContainer,{to:"/",exact:!0,activeClassName:"active"},r.a.createElement(te.a,null,"Home")),r.a.createElement(ne.LinkContainer,{to:"/add",activeClassName:"active"},r.a.createElement(te.a,null,"New Question")),r.a.createElement(ne.LinkContainer,{to:"/leaderboard",activeClassName:"active"},r.a.createElement(te.a,null,"Leader Board"))),r.a.createElement(ee.a,{bsStyle:"tabs",pullRight:!0},null!==e?r.a.createElement(ne.LinkContainer,{to:"/login",onClick:this.signOut},r.a.createElement(te.a,null,"Welcome, ",e,"! Sign Out")):r.a.createElement(te.a,null,"Please sign in")))}}]),t}(a.Component);var re=Object(v.connect)(function(e){var t=e.authedUser,n=e.users;return{authedUser:t?n[t].name.split(" ")[0]:null}})(ae),oe=n(187),se=n(185),ie=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleSetAuthedUser",value:function(e){(0,this.props.dispatch)({type:$,id:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.authedUser,a=t.usersArr,o=(this.props.location.state||{from:{pathname:"/"}}).from;return null!==n?r.a.createElement(h.a,{to:o}):r.a.createElement(D.a,{className:"center"},r.a.createElement("div",{className:"login-box"},r.a.createElement("h1",null,"Would You Rather App"),r.a.createElement("h4",null,"Sign in"),r.a.createElement(oe.a,{title:"Select User",id:"dropdown-basic"},a.map(function(t,n){return r.a.createElement(se.a,{key:n,onSelect:function(){return e.handleSetAuthedUser(t.id)}},t.name)}))))}}]),t}(a.Component);var ce=Object(v.connect)(function(e){var t=e.authedUser,n=e.users;return{authedUser:t,usersArr:Object.keys(n).reduce(function(e,t){return e.concat(n[t])},[])}})(ie),ue=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"404 PAGE NOT FOUND"))}}]),t}(a.Component),le=n(143);var me=Object(v.connect)(function(e){return{authedUser:e.authedUser}})(function(e){var t=e.component,n=Object(le.a)(e,["component"]);return r.a.createElement(p.a,Object.assign({},n,{render:function(e){return n.authedUser?r.a.createElement(t,e):r.a.createElement(h.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}),de=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(L())}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement(S.a,null),r.a.createElement(re,null),r.a.createElement(d.a,null,r.a.createElement(p.a,{path:"/",exact:!0,render:function(t){return e.props.loggedIn?r.a.createElement(H,null):r.a.createElement(h.a,{to:"/login"})}}),r.a.createElement(p.a,{path:"/login",component:ce}),r.a.createElement(me,{path:"/add",exact:!0,component:J}),r.a.createElement(me,{path:"/leaderboard",exact:!0,component:Y}),r.a.createElement(me,{path:"/question/:id",component:F}),r.a.createElement(p.a,{component:ue})))}}]),t}(a.Component);var pe=Object(b.a)(Object(v.connect)(function(e){return{loggedIn:null!==e.authedUser}})(de)),he=n(31);var be=Object(he.c)({authedUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return t.id;case K:return null;default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(E.a)({},e,t.users);case N:return Object(E.a)({},e,Object(f.a)({},t.authedUser,Object(E.a)({},e[t.authedUser],{answers:Object(E.a)({},e[t.authedUser].answers,Object(f.a)({},t.qid,t.answer))})));case C:return Object(E.a)({},e,Object(f.a)({},t.question.author,Object(E.a)({},e[t.question.author],{questions:e[t.question.author].questions.concat(t.question.id)})));default:return e}},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(E.a)({},e,t.questions);case N:return Object(E.a)({},e,Object(f.a)({},t.qid,Object(E.a)({},e[t.qid],Object(f.a)({},t.answer,Object(E.a)({},e[t.qid][t.answer],{votes:e[t.qid][t.answer].votes.concat([t.authedUser])})))));case C:return Object(E.a)({},e,Object(f.a)({},t.question.id,t.question));default:return e}},loadingBar:U.loadingBarReducer}),ve=n(141),Oe=function(e){return function(t){return function(n){console.group(n.type),console.log("The action: ",n);var a=t(n);return console.log("The new state: ",e.getState()),console.groupEnd(),a}}},fe=Object(he.a)(ve.a,Oe),Ee=n(121),je=Object(he.d)(be,fe);s.a.render(r.a.createElement(v.Provider,{store:je},r.a.createElement(Ee.a,{basename:"/would-you-rather-app"},r.a.createElement(pe,null))),document.getElementById("root"))},80:function(e,t,n){e.exports=n(180)},85:function(e,t,n){}},[[80,2,1]]]);
//# sourceMappingURL=main.61daaac6.chunk.js.map